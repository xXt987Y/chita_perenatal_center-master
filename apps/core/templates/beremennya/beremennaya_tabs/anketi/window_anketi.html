<div class="window_anketi">
    <div class="tab_anketi">

        <div class="tab_beremennya_anketi">

            <div class="default">
                <div class="text"> Дата заполнения анкеты врачем:</div>
                <div style="width: 200px;" class='data_zapolneniya_anketi_vrachem'></div>
            </div>

            <div class="default">
                <div class="text">Фамилия врача заполнившего анкету:</div>
                <div class='familiya_vracha'></div>
            </div>

            <div class="default">
                <div class="text">Вес беременной:</div>
                <input style="width: 30px" type="text" class="ves_beremennoy"/>
                <div class="doptext">кг</div>
            </div>

            <div class="default">
                <div class="text">Срок беременности, нед.:</div>
                <input style="width: 30px" type="text" class="srok_beremennosti_po_obektivnim_dannim"/>
                <div class="doptext">по объективным данным</div>
            </div>

            <div class="default1">
                <div class="text"></div>
                <input style="width: 30px; margin-left: 4px; margin-bottom: 4px;" type="text"
                       class="srok_beremennosti_po_dannim_uzi"/>
                <div class="doptext">по данным УЗИ</div>

            </div>

            <div class="default1">
                <div class="combo">
                    <input style="width: 30px; margin-left: 4px;    margin-bottom: 4px;" type="text"
                           class="srok_beremennosti_po_pervomu"/>
                    <div class="doptext">по первому шевелению плода</div>
                </div>
            </div>

            <h3>Осложнения текущей беременности</h3>

            <div class="default">
                <div class="text">Особенности протекания беременности:</div>
                <div>
                    <div class="osobennosti_protekaniya_beremennosti_krovynistie">кровянистые выделения в дни,
                        соответств.
                        ожидаемой менструации
                    </div>
                    <div class="osobennosti_protekaniya_beremennosti_virazenniy_toxikoz">выраженный токсикоз</div>
                    <div class="osobennosti_protekaniya_beremennosti_krovotechenie">кровотечение</div>
                </div>
            </div>


            <div class="default">
                <div class="text">Угроза прерывания:</div>
                <div class="ugroza_prerivaniya_do_22">до 22-ти недельного срока</div>
                <div class="ugroza_prerivaniya_posle_22">после 22-ти недельного срока</div>
            </div>

            <div class="default">
                <div class="text">Антифосфилипидный синдром:</div>
                <div class="antifosfolipidniy_sindrom">есть</div>
            </div>

            <div class="default">
                <div class="text">Проэклампсия:</div>
                <div class="preeklampsiya"></div>
            </div>

            <div class="default">
                <div class="text">Резус сенсибилизация:</div>
                <div class="rezus_sensibilizaciya"></div>
            </div>

            <div class="default">
                <div class="text">АВО-сенсибилизация:</div>
                <div class="abo_sensibilizaciya">есть</div>
            </div>

            <div class="default">
                <div class="text">Фетоплацентарная недостаточность:</div>
                <div class="fetoplacentarnaya_nedostatochnost"></div>
            </div>

            <div class="default">
                <div class="text">Нарушение околоплодных вод:</div>
                <div class="narushenie_okoplodnih_vod_mnogovodie">многоводие</div>
                <div class="narushenie_okoplodnih_vod_malovodie">маловодие</div>
                <div class="narushenie_okoplodnih_vod_mekonialnie">мекониальные</div>
            </div>

            <div class="default">
                <div class="text">Неправильное положение плода:</div>
                <div class="nepravilnoe_polojenie_ploda"></div>
            </div>

            <div class="default">
                <div class="text">Обвитие пуповины:</div>
                <div class="obvitie_pupovini">eсть</div>
            </div>

            <div class="default">
                <div class="text">Многоплодие:</div>
                <div class="mnogoplodie"></div>
            </div>

            <h3>Состояние плода</h3>

            <div class="default">
                <div class="text">Крупный плод:</div>
                <div class="krupniy_plod">тазовое предлежание</div>
            </div>

            <div class="default">
                <div class="text">Предлежание плаценты:</div>
                <div class="predlejanie_placenti"></div>
            </div>

            <div class="default">
                <div class="text">Уровень РРАР-А:</div>
                <div class="uroven_papp_a"></div>
            </div>

            <div class="default">
                <div class="text">Уровень бета ХГЧ:</div>
                <div class="uroven_beta_hgch"></div>
            </div>

            <div class="default">
                <div class="text">Факт проведения УЗИ в скриниговые сроки:</div>
                <div class="fakt_provedeniya_uzi_10_14">в срок 10-14 нед.</div>
                <div class="fakt_provedeniya_uzi_20_24">в срок 20-24 нед.</div>
                <div class="fakt_provedeniya_uzi_32_34">в срок 32-34 нед.</div>
            </div>

            <div class="default">
                <div class="text">Несоответствие данных УЗИ сроку гестации:</div>
                <div class="nesootvetstvie_dannih_uzi_soot">сост. ок. -плод.вод. (количество(ИАЖ), прозрачность, наличие
                    взвеси,
                    примес.
                </div>
                <div class="nesootvetstvie_dannih_uzi_fetomerii">фетомерии (размеры плодного яйца, эмбриона, плода)
                </div>
                <div class="nesootvetstvie_dannih_uzi_placenti">плаценты/хориона (толщина, структура, степень
                    зрелости)
                </div>
            </div>

            <div class="default">
                <div class="text">Наличие ВПР по результатам УЗИ:</div>
                <div class="nalichie_vpr_po_rezultatam_uzi"></div>
            </div>

            <div class="default">
                <div class="text">Дата проведения пренатального консилиума:</div>
                <div class="data_provedeniya_prenatalnogo_konsiliuma"></div>
                <div class="text">Номер протокола</div>
                <input style="width: 100px" type="text" class="nomer_protokola"/>
            </div>

            <div class="default">
                <div class="text">Общее состояние плода:</div>
                <div class="obshee_sostoyanie_ploda"></div>
            </div>

            <div class="default">
                <div class="text">Направлена на экстренное родоразрешение:</div>
                <div class="napravlena_na_extrennoe_rodorazreshenie">да</div>
            </div>

            <h3>Заключение врача</h3>

            <div class="default">
                <div class="text">Диагноз основной (код по МКБ-10):</div>
                <div class="diagnoz_osnovnoy_mkb10"></div>
            </div>

            <div class="default">
                <div class="text">Диагноз осложнения (код по МКБ-10):</div>
                <div class="diagnoz_oslojneniya_mkb10"></div>
            </div>

            <div class="default">
                <div class="text">Диагноз сопутствующий (код по МКБ-10):</div>
                <div class="diagnoz_soputstvuyshiy_mkb10"></div>
            </div>

            <div class="default">
                <div class="text">Дополнительные замечания врача:</div>
                <div class="dopolnitelnie_zamechaniya_vracha"></div>
            </div>


            <div class="default">
                <div>
                    <input class=" jqxButton14" type="button" value="Сохранить"/>
                </div>
            </div>

        </div>
    </div>
</div>
<style>
    .window_anketi {
        z-index: 99999 !important;
    }
</style>
<script>

    class WindowAnketi {
        constructor($window_anketi, $tab, $btn_open_window_anketi) {
            let self = this;
            this.$window = $window_anketi;
            this.$tab = $tab;
            this.$btn_open_window = $btn_open_window_anketi;
            this.$window.jqxWindow({
                position: {x: '15%', y: '10%'},
                maxHeight: 1000,
                maxWidth: 2200,
                minHeight: 400,
                minWidth: 700,
                theme: 'arctic',
                height: 500,
                width: 1200,
                title: 'Анкеты',
                autoOpen: false,
                resizable: true,
                draggable: true,
                initContent: function () {
                    $(self.$tab).jqxTabs({
                        height: '100%',
                        width: '100%',
                        theme: 'arctic',
                    });

                }
            });
            this.on_close();
        }

        on_close() {
            let self = this;
            this.$window.on('close', function () {
                self.$btn_open_window.jqxToggleButton('toggled', false);
            });
        }

    }


    let $window_anketi = $('.window_anketi');
    let $tab_anketi = $('.tab_anketi');
    $(function () {
        new WindowAnketi($window_anketi, $tab_anketi, $btn_open_window_anketi)
    })

    $(document).ready(async function () {
        let sourse_doctor;
        let source_preeklampsiya;
        let source_rezus_sensibilizaciya;
        let sourse_fetoplacentarnaya_nedostatochnost;
        let sourse_nepravilnoe_polojenie_ploda;
        let sourse_mnogoplodie;
        let sourse_predlejanie_placenti;
        let sourse_uroven_papp_a;
        let sourse_uroven_beta_hgch;
        let sourse_nalichie_vpr_po_rezultatam_uzi;
        let sourse_obshee_sostoyanie_ploda;
        let sourse_mkb10;

        await get_mega_json.then(function (data) {
            sourse_doctor = data['doctor'].map(item => item['fio']);
            source_preeklampsiya = data['preeklampsiya'].map(item => item['nazvanie']);
            source_rezus_sensibilizaciya = data['rezus_sensibilizaciya'].map(item => item['nazvanie']);
            sourse_fetoplacentarnaya_nedostatochnost = data['fetoplacentarnaya_nedostatochnost'].map(item => item['nazvanie']);
            sourse_nepravilnoe_polojenie_ploda = data['nepravilnoe_polojenie_ploda'].map(item => item['nazvanie']);
            sourse_mnogoplodie = data['mnogoplodie'].map(item => item['nazvanie']);
            sourse_predlejanie_placenti = data['predlejanie_placenti'].map(item => item['nazvanie']);
            sourse_uroven_papp_a = data['uroven_pappa'].map(item => item['nazvanie']);
            sourse_uroven_beta_hgch = data['uroven_beta_hgch'].map(item => item['nazvanie']);
            sourse_nalichie_vpr_po_rezultatam_uzi = data['nalichie_vpr_po_rezultatamUzi'].map(item => item['nazvanie']);
            sourse_obshee_sostoyanie_ploda = data['obshee_sostoyanie_ploda'].map(item => item['nazvanie']);
            sourse_mkb10 = data['mkb10'].map(item => item['nazvanie']);

        })

        //Дата заполения анкеты врачем
        $(".data_zapolneniya_anketi_vrachem").jqxDateTimeInput({width: '120px', height: '25px', theme: 'arctic'});

        //Фамилия врача заполневшего анкету
        $(".familiya_vracha").jqxComboBox({
            selectedIndex: 1,
            source: sourse_doctor,
            width: '200px',
            height: '30px',
            theme: 'arctic'
        });

        //Особенности протекания беременности
        $('.osobennosti_protekaniya_beremennosti_krovynistie').jqxCheckBox({width: 'auto', theme: 'arctic'});
        $('.osobennosti_protekaniya_beremennosti_virazenniy_toxikoz').jqxCheckBox({width: 'auto', theme: 'arctic'});
        $('.osobennosti_protekaniya_beremennosti_krovotechenie').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Угроза прерывания
        $('.ugroza_prerivaniya_do_22').jqxCheckBox({width: 'auto', theme: 'arctic'});
        $('.ugroza_prerivaniya_posle_22').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Антифосфилипидный синдром
        $('.antifosfolipidniy_sindrom').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Проэклампсия
        $(".preeklampsiya").jqxComboBox({
            selectedIndex: 1,
            source: source_preeklampsiya,
            width: '200px',
            height: '30px',
            theme: 'arctic'
        });

        //Резус сенсибилизация
        $(".rezus_sensibilizaciya").jqxComboBox({
            selectedIndex: 1,
            source: source_rezus_sensibilizaciya,
            width: '200px',
            height: '30px',
            theme: 'arctic'
        });

        //ABO-сенсибилизация
        $('.abo_sensibilizaciya').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Фетоплацентарная недостаточность
        $(".fetoplacentarnaya_nedostatochnost").jqxComboBox({
            selectedIndex: 1,
            source: sourse_fetoplacentarnaya_nedostatochnost,
            width: '200px',
            height: '30px',
            theme: 'arctic'
        });

        //Нарушение околоплодных вод
        $('.narushenie_okoplodnih_vod_mnogovodie').jqxCheckBox({width: 'auto', theme: 'arctic'});
        $('.narushenie_okoplodnih_vod_malovodie').jqxCheckBox({width: 'auto', theme: 'arctic'});
        $('.narushenie_okoplodnih_vod_mekonialnie').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Неправильное положение плода
        $(".nepravilnoe_polojenie_ploda").jqxComboBox({
            selectedIndex: 1,
            source: sourse_nepravilnoe_polojenie_ploda,
            width: '200px',
            height: '30px',
            theme: 'arctic'
        });

        //Обвитие пуповины
        $('.obvitie_pupovini').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Многоплодие
        $(".mnogoplodie").jqxComboBox({
            selectedIndex: 1,
            source: sourse_mnogoplodie,
            width: '250px',
            height: '30px',
            theme: 'arctic'
        });

        //Крупный плод
        $('.krupniy_plod').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Предлежание плаценты
        $(".predlejanie_placenti").jqxComboBox({
            selectedIndex: 1,
            source: sourse_predlejanie_placenti,
            width: '250px',
            height: '30px',
            theme: 'arctic'
        });

        //Уровень РРАР-А
        $(".uroven_papp_a").jqxComboBox({
            selectedIndex: 1,
            source: sourse_uroven_papp_a,
            width: '250px',
            height: '30px',
            theme: 'arctic'
        });

        //Уровень бета ХГЧ
        $(".uroven_beta_hgch").jqxComboBox({
            selectedIndex: 1,
            source: sourse_uroven_beta_hgch,
            width: '250px',
            height: '30px',
            theme: 'arctic'
        });

        //Факт проведения УЗИ в скриниговые сроки
        $('.fakt_provedeniya_uzi_10_14').jqxCheckBox({width: 'auto', theme: 'arctic'});
        $('.fakt_provedeniya_uzi_20_24').jqxCheckBox({width: 'auto', theme: 'arctic'});
        $('.fakt_provedeniya_uzi_32_34').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Несоответствие данных УЗИ сроку гестации:
        $('.nesootvetstvie_dannih_uzi_soot').jqxCheckBox({width: 'auto', theme: 'arctic'});
        $('.nesootvetstvie_dannih_uzi_fetomerii').jqxCheckBox({width: 'auto', theme: 'arctic'});
        $('.nesootvetstvie_dannih_uzi_placenti').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Наличие ВПР по результатам УЗИ
        $(".nalichie_vpr_po_rezultatam_uzi").jqxComboBox({
            selectedIndex: 1,
            source: sourse_nalichie_vpr_po_rezultatam_uzi,
            width: '400px',
            height: '30px',
            theme: 'arctic'
        });

        //Дата проведения пренатального консилиума
        $(".data_provedeniya_prenatalnogo_konsiliuma").jqxDateTimeInput({
            width: '120px',
            height: '25px',
            theme: 'arctic'
        });


        //Общее состояние плода
        $(".obshee_sostoyanie_ploda").jqxComboBox({
            selectedIndex: 1,
            source: sourse_obshee_sostoyanie_ploda,
            width: '250px',
            height: '30px',
            theme: 'arctic'
        });

        //Направлена на экстренное родоразрешение
        $('.napravlena_na_extrennoe_rodorazreshenie').jqxCheckBox({width: 'auto', theme: 'arctic'});

        //Диагноз основной (код по МКБ-10)
        $(".diagnoz_osnovnoy_mkb10").jqxComboBox({
            selectedIndex: 1,
            source: sourse_mkb10,
            width: '250px',
            height: '30px',
            theme: 'arctic'
        });

        //Диагноз осложнения (код по МКБ-10)
        $(".diagnoz_oslojneniya_mkb10").jqxComboBox({
            selectedIndex: 1,
            source: sourse_mkb10,
            width: '250px',
            height: '30px',
            theme: 'arctic'
        });

        //Диагноз сопутствующий (код по МКБ-10)
        $(".diagnoz_soputstvuyshiy_mkb10").jqxComboBox({
            selectedIndex: 1,
            source: sourse_mkb10,
            width: '250px',
            height: '30px',
            theme: 'arctic'
        });

        //Дополнительные замечания врача
        $('.dopolnitelnie_zamechaniya_vracha').jqxTextArea({
            placeHolder: 'Текст рекомендации',
            height: 90,
            width: '50%',
            minLength: 1,
        });
    });
</script>