<div class="h100 tabliza_doctor"></div>
<script>
    'use strict';

class TablizaDoctor {

    constructor($grid) {
            let self = this;
            this.$grid = $grid;
            this.$grid.jqxGrid(self.nastroiki_grida);
        }

        get nastroiki_grida() {
            let self = this;
            return {
                width: '100%',
                height: '100%',
                source: this.data_adapter,
                columns: this.colums,
                enabletooltips: true,
                localization: RUS_LOCALIZ,
                filterable: true,
                showtoolbar: true,
                pageable: true,
                columnsresize: true,
                autorowheight: true,
                scrollmode: 'logical',
                rowsheight: 40,
                toolbarheight: 40,
                theme: 'arctic',
                altrows: true,
                sortable: true,
                showstatusbar: true,
                statusbarheight: 25,
                pagesizeoptions: ['5', '10', '30', '50', '100'],
                pagesize: 30,
            }
        }

    get fields() {
        return [
            {name: 'id', type: 'number'},
            {name: 'fio', type: 'string'},
            {name: 'rabotaet', type: 'string'},
            {name: 'med_organiizaciya_title', type: 'string'}

        ]
    }

    get colums() {
        return [
            {
                text: 'id',
                datafield: 'id',
                align: 'center',
                cellsalign: 'center',
                width: '5%'
            },

            {
                text: 'ФИО Врача',
                datafield: 'fio',
                align: 'center',
                cellsalign: 'center',
                width: '30%',

            },


            {
                text: 'Работает',
                datafield: 'rabotaet',
                align: 'center',
                cellsalign: 'center',
                width: '30%',

            },
            {
                text: 'Название Мед.Организации',
                datafield: 'med_organiizaciya_title',
                align: 'center',
                cellsalign: 'center',
                width: '35%',

            },

        ];
    }

    get data_adapter() {

        return new $.jqx.dataAdapter({
            datatype: "json",
            data: 'data',
            url: '/api/doctor/',
            datafields: this.fields,
            sortcolumn: 'id',
            sortdirection: 'desc'
        });
    }


}


 let $tabliza_doctor = $('.tabliza_doctor');
    $(document).ready(function () {
        new TablizaDoctor($tabliza_doctor);
    });
</script>